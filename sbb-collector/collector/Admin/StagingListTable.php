<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2025-11-22 08:59:56              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 goto zhUQp; zhUQp: if (!defined('ABSPATH')) { exit; } goto M63ae; M63ae: if (!class_exists('WP_List_Table')) { require_once ABSPATH . 'wp-admin/includes/class-wp-list-table.php'; } goto YS_xW; YS_xW: class SBB_Collector_Staging_List_Table extends WP_List_Table { public function __construct() { parent::__construct(['singular' => '采集暂存项', 'plural' => '采集暂存项', 'ajax' => false]); } public function get_columns() : array { return ['cb' => '<input type="checkbox" />', 'title' => '标题', 'source_url' => '来源URL', 'attachments' => '附件数', 'status' => '状态', 'date' => '采集时间']; } public function column_cb($X2EbN) : string { return sprintf('<input type="checkbox" name="staging_ids[]" value="%s" />', $X2EbN['ID']); } protected function get_bulk_actions() : array { return ['sbb_bulk_publish' => '批量发布', 'sbb_bulk_publish_draft' => '批量发布为草稿', 'sbb_bulk_delete' => '批量删除']; } public function prepare_items() { goto skzrb; HAewe: $this->items = SBB_Collector_StagingStore::get_stati($GQPI7, ($ZFpKJ - 1) * $GQPI7); goto TDdcV; mo1ea: $bEF0I = SBB_Collector_StagingStore::count_stati(); goto wrayO; skzrb: $this->_column_headers = [$this->get_columns(), [], []]; goto K7GxP; wrayO: $this->set_pagination_args(['total_items' => $bEF0I, 'per_page' => $GQPI7]); goto HAewe; GDcco: $ZFpKJ = $this->get_pagenum(); goto mo1ea; K7GxP: $GQPI7 = 20; goto GDcco; TDdcV: } public function column_default($X2EbN, $hMuIl) { switch ($hMuIl) { case 'attachments': case 'status': case 'date': return $X2EbN[$hMuIl]; default: return ''; } } public function column_title($X2EbN) : string { goto l_BoF; l_BoF: $kdZhw = admin_url('admin.php?page=sbb-collector-staging&view_staging=' . $X2EbN['ID']); goto yICaF; qe_jY: $gw86R['delete'] = sprintf('<a href="%s" onclick="return confirm(\'确定删除该暂存？\')">删除</a>', esc_url($XB1vy)); goto EI4_F; RUR9p: $XB1vy = wp_nonce_url(admin_url('admin-post.php?action=sbb_collector_delete_staging&post_id=' . $X2EbN['ID']), 'sbb_collector_delete_staging_' . $X2EbN['ID']); goto qe_jY; K75AE: $PhYkQ = $X2EbN['content_type'] ?? 'product'; goto C2A6t; yICaF: $gw86R = ['view' => sprintf('<a href="%s">预览</a>', esc_url($kdZhw))]; goto K75AE; C2A6t: if ($PhYkQ === 'post') { if (!empty($X2EbN['published_post_id'])) { $zFkI9 = get_edit_post_link($X2EbN['published_post_id']); $gw86R['edit_post'] = sprintf('<a href="%s">查看文章</a>', esc_url($zFkI9)); } else { goto qaVUy; HjGOx: $LC2G8 = wp_nonce_url(admin_url('admin-post.php?action=sbb_collector_direct_publish&staging_id=' . $X2EbN['ID'] . '&force_status=draft'), 'sbb_direct_publish_' . $X2EbN['ID']); goto tMj4K; tMj4K: $gw86R['publish'] = sprintf('<a href="%s" class="publish">发布文章</a>', esc_url($Y9wLM)); goto G4jSD; G4jSD: $gw86R['publish_draft'] = sprintf('<a href="%s">发布为草稿</a>', esc_url($LC2G8)); goto XMlYk; qaVUy: $Y9wLM = wp_nonce_url(admin_url('admin-post.php?action=sbb_collector_direct_publish&staging_id=' . $X2EbN['ID']), 'sbb_direct_publish_' . $X2EbN['ID']); goto HjGOx; XMlYk: } } else { if (!empty($X2EbN['published_product_id'])) { $uBBek = get_edit_post_link($X2EbN['published_product_id']); $gw86R['edit_product'] = sprintf('<a href="%s">查看产品</a>', esc_url($uBBek)); } else { goto ssieF; WK7_R: if (empty($y22_H)) { $Y9wLM = admin_url('admin.php?page=sbb-collector-publish-config'); $LC2G8 = $Y9wLM; } else { if ($RyXS0) { $Y9wLM = wp_nonce_url(admin_url('admin-post.php?action=sbb_collector_direct_publish&staging_id=' . $X2EbN['ID']), 'sbb_direct_publish_' . $X2EbN['ID']); } else { $Y9wLM = admin_url('admin.php?page=sbb-collector-publish&staging_id=' . $X2EbN['ID']); } $LC2G8 = wp_nonce_url(admin_url('admin-post.php?action=sbb_collector_direct_publish&staging_id=' . $X2EbN['ID'] . '&force_status=draft'), 'sbb_direct_publish_' . $X2EbN['ID']); } goto XKeLf; hDL0K: $y22_H = $u5nQF['mapping'] ?? []; goto WK7_R; d6USu: $RyXS0 = $u5nQF['direct_publish'] ?? false; goto hDL0K; XKeLf: $gw86R['publish'] = sprintf('<a href="%s" class="publish">发布产品</a>', esc_url($Y9wLM)); goto F6Na9; F6Na9: $gw86R['publish_draft'] = sprintf('<a href="%s">发布为草稿</a>', esc_url($LC2G8)); goto T8r7M; ssieF: $u5nQF = SBB_Collector_ConfigStore::get_publish_config(); goto d6USu; T8r7M: } } goto RUR9p; EI4_F: return sprintf('<strong>%s</strong>%s', $X2EbN['title'], $this->row_actions($gw86R)); goto j98tW; j98tW: } public function column_source_url($X2EbN) : string { return sprintf('<a href="%s" target="_blank">%s</a>', esc_url($X2EbN['source_url']), esc_html($X2EbN['source_url'])); } }
